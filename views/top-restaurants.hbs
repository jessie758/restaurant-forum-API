{{> restaurant-tabs route='topRestaurants'}}

<h1 class="fw-bold">人氣餐廳</h1>

<hr />

<div class="row d-flex justify-content-center mt-5">
  {{#each restaurants}}
  <div class="col-10 col-md-9 col-lg-5">
    <div class="border border-3 rounded d-flex mb-3" style="min-height: 240px;">
      {{!-- restaurant image --}}
      <a href="/restaurants/{{this.id}}" style="min-width: 150px;">
        <div class="w-100 h-100"
          style="background-image: url({{this.image}}); background-size: cover; background-position: center;"></div>
      </a>
      {{!-- restaurant info --}}
      <div class="d-flex flex-column justify-content-between p-3 ps-4">
        <div>
          <h5>
            <a class="text-dark" href="/restaurants/{{this.id}}">{{this.name}}</a>
          </h5>
          <span class="bg-secondary badge mt-2">收藏數：{{this.favoritedCount}}</span>
          <p class="mt-2">{{this.description}}</p>
        </div>
        <div class="d-flex">
          <a class="btn btn-outline-secondary me-2" href="/restaurants/{{this.id}}">Show</a>
          {{!-- favorite button --}}
          {{#if this.isFavorited}}
          <form action='/favorites/{{this.id}}?_method=DELETE' method='POST'>
            <button type='submit' class='btn btn-outline-danger'>移除最愛</button>
          </form>
          {{else}}
          <form action='/favorites/{{this.id}}' method='POST'>
            <button type='submit' class='btn btn-outline-secondary'>加到最愛</button>
          </form>
          {{/if}}
        </div>
      </div>
    </div>
  </div>
  {{/each}}
</div>